(function(){"use strict";const l=t=>{let e=0;for(let c=0;c<t.length;c++){const r=t.charCodeAt(c);e=(e<<5)-e+r,e=e&e}const a=1e-5,s=5-a,o=Math.abs(e%1e3)/1e3;return parseFloat((a+o*s).toFixed(5))},i=t=>t<5?1:t<20?.3:t<100?.2:.1,f=(t,e,a=0)=>{const n=e!==void 0?e:i(a);let s=Math.floor(Math.random()*100),o=0,c=!1,r=0;for(r=0;r<40;r++){const g=`${t}-${s}`;if(o=l(g),r%5===0&&self.postMessage({type:"progress",attempts:r,hash:o,target:n}),o<n){c=!0;break}s++}return{hash:o,nonce:s,found:c,target:n,attempts:r+1}};self.onmessage=t=>{const{blockData:e,difficulty:a,blockHeight:n}=t.data;try{const s=f(e,a,n);self.postMessage({type:"result",result:s})}catch(s){self.postMessage({type:"error",message:s instanceof Error?s.message:"Unbekannter Fehler beim Mining"})}}})();
